<h3 id="动画展示快排">动画展示快排</h3>
<blockquote>
  <p><a href="/assets/html/quickSortAnima.html">demo</a></p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"ie=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>柱状图与快排<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;style&gt;</span>
        <span class="nc">.container</span><span class="p">{</span>
            <span class="nl">width</span><span class="p">:</span> <span class="m">800px</span><span class="p">;</span>
            <span class="nl">height</span><span class="p">:</span><span class="m">400px</span><span class="p">;</span>
            <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="no">red</span><span class="p">;</span>
            <span class="c">/* display: flex; */</span>
            <span class="nl">align-items</span><span class="p">:</span> <span class="n">flex-end</span><span class="p">;</span>
            <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nc">.container</span><span class="o">&gt;</span><span class="nt">div</span><span class="p">{</span>
            <span class="c">/* flex:1; */</span>
            <span class="nl">height</span><span class="p">:</span> <span class="m">300px</span><span class="p">;</span>
            <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="no">blue</span><span class="p">;</span>
            <span class="nl">background-color</span><span class="p">:</span> <span class="no">yellow</span><span class="p">;</span>
            <span class="nl">margin-right</span><span class="p">:</span><span class="m">20px</span><span class="p">;</span>
            <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
            <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
            <span class="nl">bottom</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
            <span class="nl">transition</span><span class="p">:</span> <span class="nb">left</span> <span class="m">.5s</span><span class="p">;</span>
            <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
            <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
            <span class="nl">line-height</span><span class="p">:</span> <span class="m">300px</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c">/* #a1{
            left:30px;
        }
        #a2{
            left:60px;
        } */</span>
    <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- &lt;div id='a1'&gt;1&lt;/div&gt;
        &lt;div id='a2'&gt;1&lt;/div&gt;
        &lt;div&gt;1&lt;/div&gt;
        &lt;div&gt;1&lt;/div&gt;
        &lt;div&gt;1&lt;/div&gt;
        &lt;div&gt;1&lt;/div&gt;
        &lt;div&gt;1&lt;/div&gt; --&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;script&gt;</span>
        <span class="kd">var</span> <span class="nx">box</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.container'</span><span class="p">)</span>
        <span class="kd">class</span> <span class="nx">renderColumnar</span><span class="p">{</span>
            <span class="kd">constructor</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="nx">targetDom</span><span class="p">){</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">arr</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">targetDom</span> <span class="o">=</span> <span class="nx">targetDom</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">basicDistance</span> <span class="o">=</span><span class="nb">parseFloat</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">getCss</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">targetDom</span><span class="p">,</span><span class="s1">'width'</span><span class="p">))</span> <span class="o">/</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">basicDistance</span> <span class="p">)</span>
            <span class="p">}</span>
            <span class="c1">//根据元素多少,在目标dom下产生多少个dom</span>
            <span class="nx">renderDom</span><span class="p">(){</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">arr</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">val</span><span class="p">,</span><span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'div'</span><span class="p">);</span>
                    <span class="nx">div</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span><span class="s2">`a</span><span class="p">${</span><span class="nx">index</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
                    <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">basicDistance</span> <span class="o">+</span> <span class="s1">'px'</span><span class="p">;</span>
                    <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">basicDistance</span> <span class="o">-</span> <span class="mi">10</span> <span class="o">+</span> <span class="s1">'px'</span><span class="p">;</span>
                    <span class="nx">div</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">targetDom</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">div</span><span class="p">);</span>
                <span class="p">})</span>
            <span class="p">}</span>
            <span class="nx">transferDom</span><span class="p">(</span><span class="nx">rIndex</span><span class="p">,</span><span class="nx">lIndex</span><span class="p">){</span>
                
                <span class="k">if</span><span class="p">(</span><span class="nx">rIndex</span> <span class="o">==</span> <span class="nx">lIndex</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
                <span class="kd">let</span> <span class="nx">temp</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">arr</span><span class="p">[</span><span class="nx">lIndex</span><span class="p">];</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">arr</span><span class="p">[</span><span class="nx">lIndex</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">arr</span><span class="p">[</span><span class="nx">rIndex</span><span class="p">];</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">arr</span><span class="p">[</span><span class="nx">rIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">;</span>
                <span class="kd">let</span> <span class="nx">rDom</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'a'</span><span class="o">+</span><span class="nx">rIndex</span><span class="p">);</span>
                <span class="kd">let</span> <span class="nx">lDom</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'a'</span><span class="o">+</span><span class="nx">lIndex</span><span class="p">);</span>
                <span class="nx">rDom</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span><span class="s1">'a'</span><span class="o">+</span><span class="nx">lIndex</span><span class="p">);</span>
                <span class="nx">lDom</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span><span class="s1">'a'</span><span class="o">+</span><span class="nx">rIndex</span><span class="p">);</span>
                <span class="kd">let</span> <span class="nx">rDomleft</span> <span class="o">=</span> <span class="nx">rDom</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
                <span class="kd">let</span> <span class="nx">lDomleft</span> <span class="o">=</span> <span class="nx">lDom</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
                <span class="nx">rDom</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">lDomleft</span> <span class="p">;</span>
                <span class="nx">lDom</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">rDomleft</span> <span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">getCss</span><span class="p">(</span><span class="nx">dom</span><span class="p">,</span><span class="nx">prop</span><span class="p">){</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">dom</span><span class="p">,</span><span class="kc">null</span><span class="p">)[</span><span class="nx">prop</span><span class="p">]</span>
                <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">dom</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">dom</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">[</span><span class="nx">prop</span><span class="p">];</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="s1">''</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">let</span> <span class="nx">tasks</span> <span class="o">=</span> <span class="p">[];</span>
         <span class="kd">function</span> <span class="nx">quickSort</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="nx">left</span><span class="p">,</span><span class="nx">right</span><span class="p">){</span>
            <span class="c1">//返回条件，数据为单个元素</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">//找基数</span>
                <span class="kd">let</span> <span class="nx">virtualBase</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">right</span><span class="p">];</span> <span class="c1">//假定基数</span>
                <span class="kd">var</span> <span class="nx">baseIndex</span> <span class="o">=</span> <span class="nx">left</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//用来得到真基数</span>
                <span class="kd">var</span> <span class="nx">temp</span><span class="p">;</span>
                <span class="c1">//循环比较</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;=</span> <span class="nx">right</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">virtualBase</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">baseIndex</span> <span class="o">++</span><span class="p">;</span> <span class="c1">//这里baseIndex必须先加,因为要紧跟left</span>
                        <span class="nx">temp</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">baseIndex</span><span class="p">];</span>
                        <span class="nx">arr</span><span class="p">[</span><span class="nx">baseIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                        <span class="nx">arr</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">;</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">baseIndex</span> <span class="o">!=</span> <span class="nx">j</span><span class="p">)</span>  <span class="nx">tasks</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">baseIndex</span><span class="p">,</span><span class="nx">j</span><span class="p">]);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nx">quickSort</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="nx">left</span><span class="p">,</span><span class="nx">baseIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span><span class="c1">//对基数左边数组排序</span>
                <span class="nx">quickSort</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="nx">baseIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span><span class="nx">right</span><span class="p">);</span><span class="c1">//对基数右边数组排序</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">arr</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">123123</span><span class="p">,</span><span class="mi">123231</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">123</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">columnar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">renderColumnar</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">slice</span><span class="p">(),</span><span class="nx">box</span><span class="p">);</span>
        <span class="nx">columnar</span><span class="p">.</span><span class="nx">renderDom</span><span class="p">();</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">quickSort</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tasks</span><span class="p">);</span>
        <span class="nx">tasks</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">val</span><span class="p">,</span><span class="nx">index</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
            <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                 <span class="nx">columnar</span><span class="p">.</span><span class="nx">transferDom</span><span class="p">(</span><span class="nx">val</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nx">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
                <span class="c1">// columnar.transferDom(val[0],val[1]);</span>
            <span class="p">},</span><span class="mi">1000</span><span class="o">*</span><span class="p">(</span><span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="p">})</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">columnar</span><span class="p">.</span><span class="nx">arr</span><span class="p">);</span>

    <span class="nt">&lt;/script&gt;</span>
    
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
